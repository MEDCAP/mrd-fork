# ADD: gradient field
# similar to acquisition field, gradient shape described with timestamp

# gradient xyz stored as 2D array with a shape of (samples, 3)
GradientData: !array
  items: float
  dimensions:
    samples:

GradHeader: !record
  fields:
    # Clock time stamp, nanoseconds since midnight
    gradientTimeStampNs: time
    # Gradient sample duration in nanoseconds
    gradientSampleTimeNs: uint
    # Grad calibration (T/m/A). Can be here or as a calGradMap calibration image or neither
    pulseCalibration: float*?

Gradient: !record
  fields:
    # Grad header
    head: GradHeader
    # Raw pulse amplitude/phase samples array
    rl: GradientData
    ap: GradientData
    fh: GradientData
  computedFields:
    # Assuming writer sets gx,gy,gz all have the same size  
    samples: size(gx, "samples")
    starttime: head.gradientTimeStampNs
    endtime: head.gradientTimeStampNs + samples * head.gradientSampleTimeNs
