# ADD: gradient field
# similar to acquisition field, gradient shape described with timestamp

# gradient xyz stored as 2D array with a shape of (samples, 3)
GradientData: !array
  items: float
  dimensions:
    samples:

GradientHeader: !record
  fields:
    # Clock time stamp, nanoseconds since AcquisitionTimeStamp
    gradientTimeStampNs: uint64
    # Gradient sample duration in nanoseconds
    gradientSampleTimeNs: uint
    # Grad calibration (T/m/A). Can be here or as a calGradMap calibration image or neither
    pulseCalibration: float*?

Gradient: !record
  fields:
    # Gradient header
    head: GradientHeader
    # Raw pulse amplitude/phase samples array
    gx: GradientData
    gy: GradientData
    gz: GradientData
  computedFields:
    # Assuming writer sets gx,gy,gz all have the same size  
    samples: size(gx, "samples")
    starttime: head.gradientTimeStampNs
    endtime: head.gradientTimeStampNs + samples * head.gradientSampleTimeNs