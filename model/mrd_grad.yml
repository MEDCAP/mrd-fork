# SKADD 2/19/25
GradDataElem: !record
  # Maybe make these all optional and include an optional rotation in the header for, e.g., oblique slices
  fields:
    gx: float 
    gy: float
    gz: float

GradData: !array
  items: GradDataElem # in A, arbitrary values calibrated to physical units as below
  dimensions:
    samples:

GradHeader: !record
  fields:
    # Clock time stamp, ns since something
    gradTimeStamp: uint64
    # Sample time in ns
    sampleTimeNs: uint
    # Grad calibration (T/m/A). Can be here or as a calGradMap calibration image or neither
    pulseCalibration: float*?

Grad: !record
  fields:
    # Grad header
    head: GradHeader
    # Raw pulse amplitude/phase samples array
    data: GradData
  computedFields:
    samples: size(data, "samples")
    starttime: head.gradTimeStamp
    endtime: head.gradTimeStamp + size(data, "samples") * head.sampleTimeNs
